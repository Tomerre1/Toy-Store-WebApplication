(this["webpackJsonpmister-toy"]=this["webpackJsonpmister-toy"]||[]).push([[0],{443:function(e,t,n){},444:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(20),c=n.n(i),s=n(29),o=n(22),l=n(111),u=n(222),d=n(19),j=n(3),h={toys:[],filterBy:{name:"",inStock:!1,sortBy:"all",selectedOptions:[]}};var b=n(5),p=n.n(b),m=n(17),O=n(224),f="/api/",v=n.n(O).a.create({withCredentials:!0}),x=function(e,t){return C(e,"GET",t)},g=function(e,t){return C(e,"POST",t)},y=function(e,t){return C(e,"PUT",t)},w=function(e,t){return C(e,"DELETE",t)};function C(e){return k.apply(this,arguments)}function k(){return(k=Object(m.a)(p.a.mark((function e(t){var n,r,a,i=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:null,e.prev=2,e.next=5,v({url:"".concat(f).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S="loggedinUser",N={login:function(e){return T.apply(this,arguments)},logout:function(){return A.apply(this,arguments)},signup:function(e){return E.apply(this,arguments)},update:function(e){return R.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem(S))}};function T(){return(T=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/login",t);case 2:return n=e.sent,sessionStorage.setItem(S,JSON.stringify(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("%c  credentials:","color: white;background: red;",t),e.next=3,y("user/".concat(t._id),t);case 3:return n=e.sent,sessionStorage.setItem(S,JSON.stringify(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/signup",t);case 2:return n=e.sent,sessionStorage.setItem(S,JSON.stringify(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("auth/logout");case 2:return sessionStorage.setItem(S,null),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.userService=N;var M={user:N.getLoggedinUser()};var _={reviews:[]};var I={isLoading:!1,isShoppingCart:!1};var D=Object(l.b)({toyModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_TOYS":return Object(j.a)(Object(j.a)({},t),{},{toys:n.toys});case"REMOVE_TOY":return e=t.toys.filter((function(e){return e._id!==n.toyId})),Object(j.a)(Object(j.a)({},t),{},{toys:e});case"ADD_TOY":return Object(j.a)(Object(j.a)({},t),{},{toys:[].concat(Object(d.a)(t.toys),[n.toy])});case"UPDATE_TOY":return e=t.toys.map((function(e){return e._id===n.toy._id?n.toy:e})),Object(j.a)(Object(j.a)({},t),{},{toys:e});case"SET_FILTER":return Object(j.a)(Object(j.a)({},t),{},{filterBy:Object(j.a)(Object(j.a)({},t.filterBy),n.filterBy)});default:return Object(j.a)({},t)}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"UPDATE_USER":n=Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),t.user)});break;case"SET_USER":n=Object(j.a)(Object(j.a)({},e),{},{user:t.user});break;case"REMOVE_CART":console.log("%c  REMOVE_CART:","color: white;background: red;",t),n=Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},t.user),{},{cart:t.user.cart.filter((function(e){return e._id!==t.toy._id}))})});break;case"ADD_CART":n=Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},t.user),{},{cart:[].concat(Object(d.a)(t.user.cart),[t.toy])})})}return window.userState=n,n},reviewModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(j.a)(Object(j.a)({},e),{},{reviews:t.reviews});case"ADD_REVIEW":return Object(j.a)(Object(j.a)({},e),{},{reviews:[].concat(Object(d.a)(e.reviews),[t.review])});case"REMOVE_REVIEW":return Object(j.a)(Object(j.a)({},e),{},{reviews:e.reviews.filter((function(e){return e._id!==t.reviewId}))});case"UPDATE_REVIEW":return Object(j.a)(Object(j.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1});case"SET_CART":return Object(j.a)(Object(j.a)({},e),{},{isShoppingCart:t.isShoppingCart});default:return e}}}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,L=Object(l.d)(D,B(Object(l.a)(u.a))),U=n(6),W=n(7),P=n(13),F=n(12),z=n(28),q=n.p+"static/media/toyLogo.6931db5e.svg",V=n(1),H=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){var e=this.props.user;return Object(V.jsx)("div",{className:"home-page full",children:Object(V.jsxs)("div",{className:"hero-text",children:[Object(V.jsxs)("h1",{className:"elegantshadow",children:["Welcome ",e&&Object(V.jsx)("span",{children:e.fullname})," to MasterToy !"]}),Object(V.jsx)("img",{src:q,alt:"MasterToy"}),Object(V.jsx)(s.b,{to:"/toy",children:"Shop Now!"})]})})}}]),n}(a.a.Component);var Y=Object(o.b)((function(e){return{user:e.userModule.user}}),null)(H),G=n(110),J=n(79),$=(n(179),function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={center:{lat:32.109333,lng:34.855499},isInfoWindowOn:!1},e.acordionBranchContent=[{heading:"Tel Aviv Branch",position:{lat:32.09151422942391,lng:34.77710737828437},content:"Even Gbirol Street, 154 ",tel:"03-5856925 ",web:"www.toy-center-tel-aviv.com",open:"Sunday - Thursday: 10am - 8pm"},{heading:"Bat Yam Branch",position:{lat:32.02131898166023,lng:34.745406250953906},content:"Arlozerov Street, 13 ",tel:"03-4549985 ",web:"www.toy-center-bat-yam.com",open:"Sunday - Thursday: 8am - 5pm"},{heading:"Rehovot Branch",position:{lat:31.89531491976764,lng:34.80132105953836},content:"Sderot Nurdau Street, 128  ",tel:"03-4452354 ",web:"www.toy-center-rehovot.com",open:"Sunday - Thursday: 11am - 7pm"}],e.onMapClicked=function(t,n,r){e.setState({center:{lat:r.latLng.lat(),lng:r.latLng.lng()}})},e.onMarkerClicked=function(){e.setState({isInfoWindowOn:!0})},e.onInfoWindowClose=function(){e.setState({isInfoWindowOn:!1})},e.onBranchClick=function(t){e.setState({isInfoWindowOn:!0,currBranchSelected:e.acordionBranchContent[t].position,currBranchDetails:e.acordionBranchContent[t].heading})},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(G.Map,{google:this.props.google,zoom:10,initialCenter:{lat:32.02393895923443,lng:34.78419219869878},onClick:this.onMapClicked,center:{lat:32.02393895923443,lng:34.78419219869878},containerStyle:{width:"%",height:"500px",position:"relative",margin:"20px"},children:[this.acordionBranchContent.map((function(t,n){return Object(V.jsx)(G.Marker,{position:t.position,name:t.heading,onClick:e.onMarkerClicked},n)})),Object(V.jsx)(G.InfoWindow,{onClose:this.onInfoWindowClose,position:this.state.currBranchSelected,visible:this.state.isInfoWindowOn,children:Object(V.jsx)("div",{children:Object(V.jsx)("h1",{children:this.state.currBranchDetails})})})]}),Object(V.jsx)(J.a,{allowZeroExpanded:!0,children:this.acordionBranchContent.map((function(t,n){return Object(V.jsxs)(J.b,{children:[Object(V.jsx)(J.d,{onClick:function(){return e.onBranchClick("".concat(n))},children:Object(V.jsx)(J.c,{children:t.heading})}),Object(V.jsxs)(J.e,{children:[Object(V.jsx)("h2",{children:t.heading}),Object(V.jsxs)("p",{children:["Addres: ",t.content]}),Object(V.jsxs)("p",{children:["Tel: ",t.tel]}),Object(V.jsxs)("p",{children:["Web: ",t.web]}),Object(V.jsxs)("p",{children:["Open Hours: ",t.open]})]})]},n)}))})]})}}]),n}(r.Component)),X=Object(G.GoogleApiWrapper)({apiKey:"AIzaSyBt9sd91oGMMUTkT3NIS4oMPBRxyAHNZEs"})($),Z=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(V.jsx)("section",{className:"about",children:Object(V.jsx)(X,{})})}}]),n}(a.a.Component),K=n(95),Q=n(244),ee=n(492),te=Object(Q.a)(),ne=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={selectedOptions:[],checkedToggle:"All"},e.optionsSlider=[{name:"inStock",label:"All",value:!1},{name:"inStock",label:"In Stock",value:!0}],e.options=[{value:"On wheels",label:"On wheels"},{value:"Box game",label:"Box game"},{value:"Art",label:"Art"},{value:"Baby",label:"Baby"},{value:"Doll",label:"Doll"},{value:"Puzzle",label:"Puzzle"},{value:"Outdoor",label:"Outdoor"}],e.options2=[{value:"all",label:"All",name:"sortBy"},{value:"name",label:"Name",name:"sortBy"},{value:"date",label:"Date",name:"sortBy"},{value:"price",label:"Price",name:"sortBy"}],e.handleChangeSelect=function(t){var n=t.map((function(e){return e}));e.setState({selectedOptions:n},(function(){e.props.handleChange(t)}))},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this,t=this.props.handleChange,n=this.state.selectedOptions;return Object(V.jsx)("form",{className:"toy-filter",onSubmit:function(e){e.preventDefault()},children:Object(V.jsxs)("div",{className:"filter",children:[Object(V.jsx)(ee.a,{type:"search",variant:"outlined",label:"Filter by toy name",name:"name",className:"toy-input",placeholder:"Filter by toy name",onChange:t}),Object(V.jsx)(K.a,{className:"filter-toy",name:"sortBy",onChange:t,options:this.options2}),Object(V.jsx)(K.a,{onChange:this.handleChangeSelect,closeMenuOnSelect:!1,components:te,isMulti:!0,value:n,options:this.options}),Object(V.jsx)("div",{className:"center",children:Object(V.jsxs)("div",{className:"switches-container",children:[this.optionsSlider.map((function(n){return Object(V.jsx)("input",{type:"radio",onChange:function(r){t(r),e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{checkedToggle:n.label})}))},id:n.label,name:n.name,value:n.value,checked:e.state.checkedToggle===n.label})})),this.optionsSlider.map((function(e){return Object(V.jsx)("label",{htmlFor:e.label,children:e.label})})),Object(V.jsx)("div",{className:"switch-wrapper",children:Object(V.jsx)("div",{className:"switch",children:this.optionsSlider.map((function(e){return Object(V.jsx)("div",{children:e.label})}))})})]})})]})})}}]),n}(a.a.Component);function re(e){var t=e.toy,n=e.onRemoveToy,r=e.onEditToy,a=e.user;return Object(V.jsx)(s.b,{to:"/toy/details/".concat(t._id),children:Object(V.jsxs)("li",{className:"toy-preview",children:[Object(V.jsx)("p",{children:t.name}),Object(V.jsx)("img",{src:"https://robohash.org/".concat(t.name),alt:"toy"}),Object(V.jsx)("span",{children:Object(V.jsxs)("p",{children:["Price:",t.price.toLocaleString(),"$"]})}),!t.inStock&&Object(V.jsx)("span",{className:"sold-out",children:"Sold out"}),a&&a.isAdmin&&Object(V.jsxs)("div",{className:"toy-preview-btns",children:[Object(V.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),n(t._id)},className:"trash-btn",children:Object(V.jsx)("i",{className:"fas fa-trash"})}),Object(V.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),r(t._id)},className:"edit-btn",children:Object(V.jsx)("i",{className:"fas fa-edit"})})]})]})})}function ae(e){var t=e.toys,n=e.onRemoveToy,r=e.onEditToy,a=e.user;return Object(V.jsx)("div",{className:"toy-container",children:Object(V.jsx)("ul",{className:"toy-list",children:t.map((function(e){return Object(V.jsx)(re,{toy:e,user:a,onEditToy:r,onRemoveToy:n},e._id)}))})})}var ie=n(16),ce=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={toy:{name:"",price:"",labels:[],inStock:[]},options:[],inStockOptions:[{value:!0,label:"Yes"},{value:!1,label:"No"}]},e.handleChange=function(t){var n="number"===t.target.type?+t.target.value:t.target.value,r=t.target.name;e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:Object(j.a)(Object(j.a)({},e.toy),{},Object(ie.a)({},r,n))})}))},e.handleSelectChange=function(t){var n=t;n.length>3||e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:Object(j.a)(Object(j.a)({},e.toy),{},{labels:n})})}))},e.handleSelectChangeInStock=function(t){var n=t;e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:Object(j.a)(Object(j.a)({},e.toy),{},{inStock:n})})}))},e.onSubmit=function(t){t.preventDefault();var n=e.props,r=n.onAddToy,a=n.onToggleAdd;r(Object(j.a)(Object(j.a)({},e.state.toy),{},{inStock:e.state.toy.inStock.value})),a()},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"loadLabels",value:function(){var e=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"].map((function(e){return{value:e.toLowerCase(),label:e}}));this.setState((function(t){return Object(j.a)(Object(j.a)({},t),{},{options:e})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.toy,r=t.options,a=t.inStockOptions,i=this.props.onToggleAdd;return Object(V.jsx)("div",{className:"add-toy",children:Object(V.jsxs)("form",{onSubmit:function(t){e.onSubmit(t)},children:[Object(V.jsx)("label",{htmlFor:"name",children:Object(V.jsx)("input",{type:"text",name:"name",placeholder:"Enter toy name ",id:"name",value:n.name,onChange:this.handleChange,required:!0})}),Object(V.jsx)("label",{htmlFor:"price",children:Object(V.jsx)("input",{type:"number",name:"price",placeholder:"Enter toy price",id:"price",value:n.price,onChange:this.handleChange,required:!0})}),Object(V.jsx)(K.a,{className:"select",value:n.labels,isMulti:!0,onChange:this.handleSelectChange,options:r,placeholder:"Choose up to 3 labels :"}),Object(V.jsx)(K.a,{className:"select",value:n.inStock,onChange:this.handleSelectChangeInStock,options:a,placeholder:"In stock?"}),Object(V.jsxs)("div",{className:"add-btns",children:[Object(V.jsx)("button",{className:"btn add",type:"submit",children:Object(V.jsx)("span",{className:"fas fa-plus"})}),Object(V.jsx)("button",{className:"btn cancel",onClick:i,children:Object(V.jsx)("span",{className:"fas fa-undo-alt"})})]})]})})}}]),n}(a.a.Component),se={query:function(e){return oe.apply(this,arguments)},getById:function(e){return le.apply(this,arguments)},save:function(e){return ue.apply(this,arguments)},remove:function(e){return je.apply(this,arguments)},update:function(e){return de.apply(this,arguments)}};function oe(){return(oe=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("toy",{params:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("toy/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("toy",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("toy",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(){return(je=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("toy/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.ts=se;var he={on:function(e,t){var n=function(e){var n=e.detail;t(n)};return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function be(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";he.emit("show-user-msg",{txt:e,type:t})}function pe(e){be(e,"success")}function me(e){be(e,"danger")}function Oe(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.query(e);case 3:r=t.sent,n({type:"SET_TOYS",toys:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),me("Cannot load toys");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function fe(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.update(e);case 3:return r=t.sent,n({type:"UPDATE_TOY",toy:r}),pe("Toy updated"),t.abrupt("return",r);case 9:t.prev=9,t.t0=t.catch(0),me("Cannot update toy"),console.log("Cannot save toy",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}window.myBus=he,window.showUserMsg=be;var ve=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isAdd:!1},e.onRemoveToy=function(t){e.props.onRemoveToy(t)},e.onAddToy=function(t){console.log("%c  toy:","color: white;background: red;",t),t.labels=t.labels.map((function(e){return e.label})),e.props.onAddToy(t),e.onToggleAdd()},e.onToggleAdd=function(){e.setState({isAdd:!e.state.isAdd})},e.onEditToy=function(t){e.props.history.push("/toy/edit/".concat(t))},e.onHandleChange=function(t){e.props.handleChange(t,e.props.filterBy)},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.props.filterBy)}},{key:"componentWillUnmount",value:function(){this.props.resetFilter()}},{key:"render",value:function(){var e=this.props,t=e.toys,n=e.user,r=this.state.isAdd;return Object(V.jsxs)("main",{className:"toy-app",children:[Object(V.jsx)(ne,{handleChange:this.onHandleChange}),r&&n&&n.isAdmin&&Object(V.jsx)(ce,{onAddToy:this.onAddToy,onToggleAdd:this.onToggleAdd}),!r&&n&&n.isAdmin&&Object(V.jsx)("div",{className:"wrap",children:Object(V.jsx)("button",{onClick:this.onToggleAdd,children:"Add Toy"})}),Object(V.jsx)(ae,{toys:t,user:n,onRemoveToy:this.onRemoveToy,onEditToy:this.onEditToy})]})}}]),n}(a.a.Component);var xe={loadToys:Oe,onRemoveToy:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.remove(e);case 3:n({type:"REMOVE_TOY",toyId:e}),pe("Toy removed"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),me("Cannot remove toy"),console.log("Cannot remove toy",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},onAddToy:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,se.save(e);case 3:r=t.sent,n({type:"ADD_TOY",toy:r}),console.log("Added toy",r.data),pe("Toy added"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Cannot add toy",t.t0),me("Cannot add toy");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},onEditToy:fe,handleChange:function(e,t){return console.log("%c  filterBy:","color: white;background: red;",t),console.log("%c  event, filterBy:","color: white;background: red;",e,t),function(n){var r,a,i;Array.isArray(e)?i={selectedOptions:e.map((function(e){return e.label}))}:e.label&&e.value?i=Object(ie.a)({},e.name,e.value):(r=e.target.name,a=e.target.value,i=Object(ie.a)({},r,a)),n({type:"SET_FILTER",filterBy:i}),Oe(Object(j.a)(Object(j.a)({},t),i))(n)}},resetFilter:function(){return function(e){e({type:"SET_FILTER",filterBy:{name:"",inStock:!0,sortBy:"all",selectedOptions:[]}})}}},ge=Object(o.b)((function(e){return{toys:e.toyModule.toys,filterBy:e.toyModule.filterBy,user:e.userModule.user}}),xe)(ve),ye=n(229),we=(n(306),n(493)),Ce=n(494),ke=n(496),Se=n(233),Ne=n.n(Se),Te=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={open:e.props.open,review:{comment:"",rating:0},hover:-1},e.labels={1:"Useless",2:"Poor",3:"Ok",4:"Good",5:"Excellent"},e.handleChange=function(t){var n=t.target,r=n.name,a="number"===n.type?+n.value:n.value;e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{review:Object(j.a)(Object(j.a)({},e.review),{},Object(ie.a)({},r,a))})}))},e.onAddReview=function(t){t.preventDefault();var n=e.state,r=n.review,a=n.hover,i=e.state.review.rating;i&&(e.props.toggleModal(),r.comment=e.labels[-1!==a?a:i]+": "+r.comment,e.props.addToyReview(r),e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{review:Object(j.a)(Object(j.a)({},e.review),{},{rating:null,comment:""}),open:!1})})))},e.setRating=function(t){var n=t.target;e.setState((function(e){return{review:Object(j.a)(Object(j.a)({},e.review),{},{rating:+n.value})}}))},e.setHover=function(t){e.setState({hover:t})},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.setState({review:{comment:"",rating:null},open:this.props.open})}},{key:"render",value:function(){var e=this,t=this.state.review,n=t.comment,r=t.rating,a=this.state.hover,i=this.props,c=i.open,s=i.toggleModal;return Object(V.jsx)("div",{children:Object(V.jsx)(ye.a,{open:c,onClose:s,children:Object(V.jsxs)("form",{className:"review-add",onSubmit:this.onAddReview,children:[Object(V.jsx)("h2",{children:"Review"}),Object(V.jsxs)("div",{className:"modal-body",children:[Object(V.jsx)(ee.a,{id:"outlined-multiline-flexible",label:"Enter Review",variant:"outlined",type:"text",name:"comment",multiline:!0,rows:4,value:n,color:"primary",onChange:this.handleChange,required:!0}),Object(V.jsxs)("div",{className:"modal-rating",children:[Object(V.jsx)(Ce.a,{onChange:this.setRating,size:"large",onChangeActive:function(t,n){e.setHover(n)},emptyIcon:Object(V.jsx)(Ne.a,{style:{opacity:.55},fontSize:"inherit"}),value:r}),-1!==a&&Object(V.jsx)(ke.a,{sx:{ml:2},children:this.labels[-1!==a?a:r]})]})]}),Object(V.jsx)(we.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Add Review"})]})})})}}]),n}(a.a.Component),Re={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},formateDate:function(e){return("0"+(e=new Date(e)).getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear()+", "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}};var Ee=n(497);function Ae(){return Object(V.jsx)("div",{className:"loader",children:Object(V.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",children:[Object(V.jsx)("g",{transform:"rotate(0 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-1.1105371900826446s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(8.181818181818182 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-1.084710743801653s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(16.363636363636363 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-1.0588842975206612s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(24.545454545454547 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-1.0330578512396695s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(32.72727272727273 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-1.0072314049586777s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(40.90909090909091 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.981404958677686s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(49.09090909090909 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.9555785123966942s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(57.27272727272727 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.9297520661157025s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(65.45454545454545 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.9039256198347108s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(73.63636363636364 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.878099173553719s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(81.81818181818181 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.8522727272727273s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(90 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.8264462809917356s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(98.18181818181819 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.8006198347107438s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(106.36363636363636 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.7747933884297521s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(114.54545454545455 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.7489669421487604s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(122.72727272727273 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.7231404958677686s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(130.9090909090909 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.6973140495867769s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(139.0909090909091 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.6714876033057852s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(147.27272727272728 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.6456611570247934s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(155.45454545454547 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.6198347107438017s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(163.63636363636363 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.59400826446281s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(171.8181818181818 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.5681818181818182s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(180 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.5423553719008265s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(188.1818181818182 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.5165289256198348s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(196.36363636363637 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.490702479338843s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(204.54545454545453 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.46487603305785125s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(212.72727272727272 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.4390495867768595s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(220.9090909090909 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.4132231404958678s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(229.0909090909091 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.38739669421487605s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(237.27272727272728 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.3615702479338843s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(245.45454545454547 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.3357438016528926s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(253.63636363636363 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.30991735537190085s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(261.8181818181818 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.2840909090909091s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(270 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.2582644628099174s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(278.1818181818182 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.23243801652892562s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(286.3636363636364 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.2066115702479339s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(294.54545454545456 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.18078512396694216s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(302.72727272727275 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.15495867768595042s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(310.90909090909093 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.1291322314049587s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(319.09090909090907 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.10330578512396695s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(327.27272727272725 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.07747933884297521s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(335.45454545454544 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.05165289256198347s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(343.6363636363636 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"-0.025826446280991736s",repeatCount:"indefinite"})})}),Object(V.jsx)("g",{transform:"rotate(351.8181818181818 50 50)",children:Object(V.jsx)("rect",{x:"46.5",y:"15",rx:"3.5",ry:"5.76",width:"7",height:"12",fill:"#333333",children:Object(V.jsx)("animate",{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1.1363636363636365s",begin:"0s",repeatCount:"indefinite"})})})]})})}function Me(e){var t=e.review,n=e.removeToyReview,r=e.user;return t.toy?Object(V.jsxs)("section",{className:"review",children:[r&&(r._id===t.user._id||r.hasOwnProperty("isAdmin"))&&Object(V.jsx)("button",{onClick:function(){n(t._id)},className:"delete-review pointer",children:"\xd7"}),Object(V.jsxs)("div",{className:"review-header",children:[Object(V.jsx)(Ee.a,{children:t.user.fullname[0].toUpperCase()}),Object(V.jsxs)("p",{children:[" ",t.user.fullname]}),Object(V.jsx)(Ce.a,{value:t.rating,readOnly:!0})]}),Object(V.jsxs)("div",{className:"review-comment",children:[Object(V.jsx)("p",{className:"toy-name",children:t.toy.name}),Object(V.jsxs)("p",{children:[" ",t.comment]})]}),Object(V.jsx)("span",{children:Re.formateDate(t.createdAt)})]}):Object(V.jsx)(Ae,{})}function _e(e){var t=e.reviews,n=e.removeToyReview,a=e.user,i=Object(r.useRef)();return Object(r.useEffect)((function(){i.current.scroll({top:i.current.scrollHeight,behavior:"smooth"})}),[t]),Object(V.jsx)("div",{className:"reviews-list",ref:i,children:t.map((function(e,t){return Object(V.jsx)(Me,{user:a,removeToyReview:n,review:e},t)}))})}function Ie(e){var t=e.message;return Object(V.jsxs)("li",{className:"ai-person-container",children:[Object(V.jsx)("div",{className:t.writer,children:Object(V.jsx)("p",{children:t.text})}),Object(V.jsx)("span",{className:"".concat(t.writer,"-date"),children:t.date})]})}function De(e){var t=e.messages;return Object(V.jsx)(a.a.Fragment,{children:t.map((function(e,t){return Object(V.jsx)(Ie,{message:e},t)}))})}var Be=n(234),Le=n.n(Be),Ue=function(){var e=null;return{setup:function(){e=Le()("")},on:function(t,n){e.on(t,n)},off:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(n?e.off(t,n):e.removeAllListeners(t))},emit:function(t,n){e.emit(t,n)},terminate:function(){e=null}}}();window.socketService=Ue,Ue.setup(),Ue.on("review-about-you",(function(e){console.log("Review about me!",e)}));var We=n(235),Pe=n.n(We),Fe=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={message:{text:"",date:null},messages:[],user:e.props.user,typingMsg:null},e.elRef=a.a.createRef(),e.elContainerRef=a.a.createRef(),e.addMsg=function(t){t.writer=e.state.user&&t.user===e.state.user.fullname?"person":"ai",e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),[t])})}))},e.addTypingMsg=function(t){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{typingMsg:t})}))},e.onChangeMessage=function(t){var n=t.target.value,r=e.props.user,a=n.length>0?"".concat((null===r||void 0===r?void 0:r.fullname)||"Guest"," is typing..."):null;Ue.emit("chat typing",a),e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{message:Object(j.a)(Object(j.a)({},e.message),{},{text:n})})}))},e.onSubmitMessage=function(t){t.preventDefault();var n=e.state,r=n.message,a=n.user,i=(new Date).toLocaleString("he-IL");r.writer="person";var c=(null===a||void 0===a?void 0:a.fullname)||"Guest",s="".concat(c,": ").concat(r.text);Ue.emit("chat newMsg",{text:s,user:c,date:i}),Ue.emit("chat typing",null),e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{message:{text:"",date:null}})}))},e.aiResponse=function(){var t=e.state.messages,n={text:"Support: Yes honey!",date:(new Date).toLocaleString("he-IL"),writer:"ai"};setTimeout((function(){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{messages:[].concat(Object(d.a)(t),[n])})}))}),1e3)},e.scrollToBottom=function(){e.elRef.current.scroll({top:e.elRef.current.scrollHeight,behavior:"smooth"})},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){Ue.setup(),Ue.emit("chat topic",this.props.toy._id),Ue.on("chat addMsg",this.addMsg),Ue.on("chat addTypingMsg",this.addTypingMsg)}},{key:"componentDidUpdate",value:function(){this.elRef.current.scroll({top:this.elRef.current.scrollHeight,behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){Ue.off("chat addMsg",this.addMsg),Ue.off("chat addTypingMsg",this.addTypingMsg),Ue.terminate()}},{key:"render",value:function(){var e=this.state,t=e.messages,n=e.message,r=e.typingMsg;return Object(V.jsxs)("div",{className:"chat-window flex",children:[Object(V.jsxs)("div",{className:"chat-box",ref:this.elContainerRef,children:[Object(V.jsx)("h1",{children:"Lets Chat"}),r&&Object(V.jsx)("p",{children:r}),Object(V.jsx)("ul",{className:"chat-content",ref:this.elRef,children:Object(V.jsx)(De,{messages:t})}),Object(V.jsx)("div",{className:"chat-controller",children:Object(V.jsxs)("form",{className:"flex justify-space-between",onSubmit:this.onSubmitMessage,children:[Object(V.jsx)(ee.a,{required:!0,variant:"outlined",label:"Chat with me",type:"text",name:"chat-input",value:n.text,onChange:this.onChangeMessage}),Object(V.jsx)(we.a,{type:"submit",color:"primary",children:Object(V.jsx)(Pe.a,{})})]})})]}),Object(V.jsx)("button",{onClick:this.props.toggleChat,className:"closeChat",children:"x"})]})}}]),n}(a.a.Component);function ze(e){return Object(V.jsx)("section",{className:"popup",children:Object(V.jsx)("div",{className:"main",children:e.children})})}var qe={add:function(e){return Ye.apply(this,arguments)},query:function(e){return Ve.apply(this,arguments)},remove:function(e){return He.apply(this,arguments)}};function Ve(){return(Ve=Object(m.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"?userId=".concat(t.hasOwnProperty("userId")?t.userId:"","&toyId=").concat(t.hasOwnProperty("toyId")?t.toyId:""):"",e.next=3,x("review".concat(n));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(){return(He=Object(m.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("review/".concat(t," "));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(m.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.query(e);case 3:r=t.sent,n({type:"SET_REVIEWS",reviews:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function Je(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("reviewId",e),t.next=4,qe.remove(e);case 4:n({type:"REMOVE_REVIEW",reviewId:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in removeReview",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var $e=n(236),Xe=n.n($e);function Ze(e){return function(t){return N.login(e).then((function(e){return t({type:"SET_USER",user:e}),e})).catch((function(e){me("Cannot login"),console.log("Cannot login",e)}))}}function Ke(e){return function(t){return N.signup(e).then((function(e){return t({type:"SET_USER",user:e}),e})).catch((function(e){me("Cannot signup"),console.log("Cannot signup",e)}))}}function Qe(e,t){return console.log("%c  user.cart.filter(currToy => currToy._id !== toy._id):","color: white;background: red;",e.cart.filter((function(e){return e._id!==t._id}))),function(){var n=Object(m.a)(p.a.mark((function n(r){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{N.update(Object(j.a)(Object(j.a)({},e),{},{cart:e.cart.filter((function(e){return e._id!==t._id}))})).then((function(){r({type:"REMOVE_CART",user:e,toy:t})})).catch((function(e){me("Cannot update"),console.log("Cannot update user",e)}))}catch(a){me("Cannot update"),console.log("Cannot update user",a)}case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}var et=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,i=new Array(r),c=0;c<r;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state={toy:null,isChatOpen:!1,isReviewAdd:!1},e.elRef=a.a.createRef(),e.toggleChat=function(){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{isChatOpen:!e.isChatOpen})}))},e.toggleReviewAdd=function(){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{isReviewAdd:!e.isReviewAdd})}))},e.escFunction=function(t){27===t.keyCode&&e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{isChatOpen:!1})}))},e.toggleModal=function(){e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{isReviewAdd:!e.isReviewAdd})}))},e.addToyReview=function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params.toyId,n.toyId=r,t.next=4,e.props.addReview(n);case 4:return t.next=6,e.props.loadReviews({toyId:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeToyReview=function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeReview(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addToCart=Object(m.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onAddCart(e.props.user,e.state.toy);case 2:case"end":return t.stop()}}),t)}))),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,se.getById(t);case 3:return n=e.sent,console.log("%c  toy:","color: white;background: red;",n),e.next=7,this.props.loadReviews({toyId:t});case 7:this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:n})})),document.body.addEventListener("keydown",this.escFunction,!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e,t=this.state,n=t.toy,r=t.isChatOpen,a=t.isReviewAdd,i=this.props,c=i.user,o=i.reviews;return n?Object(V.jsxs)("div",{className:"container",children:[Object(V.jsx)("div",{className:"product-image",children:Object(V.jsx)("img",{src:"https://robohash.org/".concat(n.name),alt:"",className:"product-logo"})}),Object(V.jsxs)("div",{className:"product-details",children:[Object(V.jsxs)("header",{children:[Object(V.jsx)("h1",{className:"title",children:n.name}),Object(V.jsxs)("div",{className:"price",children:[Object(V.jsxs)("span",{className:"before",children:[2*n.price,"$"]}),Object(V.jsxs)("span",{className:"current",children:[n.price,"$"]})]})]}),Object(V.jsxs)("article",{children:[Object(V.jsx)("h5",{children:"Description"}),Object(V.jsx)("p",{children:"Lorem ipsum dolorl sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."})]}),Object(V.jsx)("div",{className:"controls",children:Object(V.jsx)("div",{className:"labels",children:Object(V.jsxs)("div",{className:"toy-labels",children:[n.labels.map((function(e,t){return Object(V.jsx)("div",{children:Object(V.jsx)("p",{className:"label",children:e})},t)})),Object(V.jsx)("div",{children:Object(V.jsx)("p",{className:"label-".concat(n.inStock?"green":"red"),children:n.inStock?"In Stock":"Sold Out"})})]})})}),!c&&Object(V.jsxs)("p",{children:["To write a review please login ",Object(V.jsx)(s.b,{to:"/login",children:" Here"})]}),o.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(_e,{user:c,removeToyReview:this.removeToyReview,reviews:o})}),Object(V.jsx)(Te,{}),r&&Object(V.jsx)(ze,{children:Object(V.jsx)(Fe,{toy:n,user:c,toggleChat:this.toggleChat})}),!r&&Object(V.jsx)("button",{onClick:this.toggleChat,className:"chat-button",children:Object(V.jsx)(Xe.a,{})}),Object(V.jsxs)("div",{className:"details-btns",children:[Object(V.jsx)(s.b,{to:"/toy",className:"back",type:"button",children:Object(V.jsx)("span",{children:"Back Toys"})}),c&&Object(V.jsx)("button",{className:"back",onClick:this.toggleReviewAdd,children:Object(V.jsx)("span",{children:"Add Review"})}),c&&(null===(e=this.state.toy)||void 0===e?void 0:e.inStock)&&Object(V.jsx)("button",{className:"back",onClick:this.addToCart,children:Object(V.jsx)("span",{children:"Add To Cart"})})]}),Object(V.jsx)(Te,{open:a,addToyReview:this.addToyReview,toggleModal:this.toggleModal})]})]}):Object(V.jsx)(Ae,{})}}]),n}(a.a.Component);var tt={loadReviews:Ge,removeReview:Je,addReview:function(e){return function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.add(e);case 3:return r=t.sent,n({type:"ADD_REVIEW",review:r}),t.abrupt("return",r);case 8:t.prev=8,t.t0=t.catch(0),console.log("ReviewActions: err in addReview",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},onAddCart:function(e,t){return function(){var n=Object(m.a)(p.a.mark((function n(r){return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:N.update(Object(j.a)(Object(j.a)({},e),{},{cart:[].concat(Object(d.a)(e.cart),[t])})).then((function(){return r({type:"ADD_CART",user:e,toy:t})})).catch((function(e){me("Cannot update"),console.log("Cannot update user",e)}));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},nt=Object(o.b)((function(e){return{user:e.userModule.user,reviews:e.reviewModule.reviews}}),tt)(et),rt=n(482),at=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={toy:null},e.handleChange=function(t){var n=t.target.name,r="number"===t.target.type?+t.target.value:t.target.value;e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:Object(j.a)(Object(j.a)({},e.toy),{},Object(ie.a)({},n,r))})}))},e.onSubmit=function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=e.state.toy,t.next=4,e.props.onEditToy(r);case 4:e.props.history.push("/toy");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,se.getById(t);case 3:n=e.sent,this.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{toy:n})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.toy;return e?Object(V.jsxs)("div",{className:"container",children:[Object(V.jsx)("div",{className:"product-image",children:Object(V.jsx)("img",{src:"https://robohash.org/".concat(e.name),alt:"",className:"product-logo"})}),Object(V.jsxs)("div",{className:"product-details",children:[Object(V.jsx)("header",{children:Object(V.jsx)("h1",{className:"title",children:e.name})}),Object(V.jsxs)("form",{className:"edit-toy",onSubmit:this.onSubmit,children:[Object(V.jsx)(rt.a,{type:"text",name:"name",value:e.name,onChange:this.handleChange,required:!0}),Object(V.jsx)(rt.a,{type:"number",name:"price",value:e.price,onChange:this.handleChange,required:!0}),Object(V.jsx)(we.a,{type:"submit",className:"back",children:"Submit Edit"})]})]})]}):Object(V.jsx)(Ae,{})}}]),n}(a.a.Component);var it={onEditToy:fe},ct=Object(o.b)((function(e){return{}}),it)(at),st=n(135);function ot(e){var t=e.data,n=(e.labels,{labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],datasets:[{label:"# of Toys",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 255, 100, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 255, 100, 1)"],borderWidth:3}]});return Object(V.jsx)(st.b,{data:n,width:350,height:350,options:{maintainAspectRatio:!1}})}function lt(e){var t=e.data,n=e.toys.map((function(e){return e.price})).sort((function(e,t){return e-t})),r={labels:n=Object(d.a)(new Set(n)),datasets:[{label:"# of Toys",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 199, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 199, 64, 1)"],borderWidth:3}]};return Object(V.jsx)(st.a,{data:r,width:350,height:350,options:{maintainAspectRatio:!1}})}var ut=Object(o.b)((function(e){return{toys:e.toyModule.toys}}),null)((function(){var e=Object(o.d)((function(e){return e.toyModule.toys}));console.log("%c  toys:","color: white;background: red;",e);return Object(V.jsxs)("div",{className:"charts",children:[Object(V.jsxs)("div",{className:"chart",children:[Object(V.jsx)("h1",{children:"Label statistics:"}),Object(V.jsx)("div",{children:Object(V.jsx)(ot,{data:function(){for(var t=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],n=[],r=0;r<t.length;r++)n.push(0);for(var a=0;a<e.length;a++)for(var i=0;i<e[a].labels.length;i++)n[t.indexOf(e[a].labels[i])]++;return n}()})})]}),Object(V.jsxs)("div",{className:"chart",children:[Object(V.jsx)("h1",{children:"Price statistics:"}),Object(V.jsx)("div",{children:Object(V.jsx)(lt,{data:function(){var t=e.map((function(e){return e.price})).sort((function(e,t){return e-t}));t=Object(d.a)(new Set(t));for(var n=[],r=0;r<t.length;r++)n.push(0);for(var a=0;a<e.length;a++)n[t.indexOf(e[a].price)]++;return n}(),toys:e})})]})]})})),dt=n(66),jt=n(241),ht=n.n(jt),bt=n(489),pt=n(490),mt=n(491),Ot=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isSignup:!1},e.AcordionContent=[{heading:"Want to be admin?",content:"Login with this credentials Username: admin and Password: admin "}],e.toggleSignup=function(){e.setState({isSignup:!e.state.isSignup})},e.validate=function(t){var n={};return t.username||(n.username="Required username"),t.password||(n.password="Required password"),e.state.isSignup&&!t.fullname&&(n.fullname="Required fullname"),n},e.onFormSubmit=function(){var t=Object(m.a)(p.a.mark((function t(n,r){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.setSubmitting,t.prev=1,!e.state.isSignup){t.next=8;break}return t.next=5,e.props.onSignup(n);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,e.props.onLogin(n);case 10:t.t0=t.sent;case 11:t.t0?e.props.history.push("/"):e.state.isSignup?me("User already exists"):me("Wrong credentials"),t.next=18;break;case 15:t.prev=15,t.t1=t.catch(1),console.log(t.t1);case 18:return t.prev=18,a(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,15,18,21]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.props.user&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.isSignup,t=function(e){return Object(V.jsx)(ee.a,Object(j.a)(Object(j.a)({},e),{},{variant:"outlined",color:"primary"}))};return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(bt.a,{component:"main",className:"login-container",maxWidth:"xs",children:[Object(V.jsxs)("div",{className:"flex column align-center",children:[Object(V.jsx)(Ee.a,{className:"avatar",children:Object(V.jsx)(ht.a,{})}),Object(V.jsx)(pt.a,{component:"h1",variant:"h5",children:e?"Signup":"Login"}),Object(V.jsx)(dt.d,{initialValues:{fullname:"",username:"",password:""},validate:this.validate,onSubmit:this.onFormSubmit,children:function(n){var r=n.isSubmitting;return Object(V.jsxs)(dt.c,{style:{width:"100%"},children:[e&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(dt.b,{variant:"outlined",margin:"normal",fullWidth:!0,name:"fullname",label:"Full Name",type:"text",autoComplete:"current-password",as:t,required:!0}),Object(V.jsx)(dt.a,{name:"fullname",component:"div"})]}),Object(V.jsx)(dt.b,{margin:"normal",fullWidth:!0,label:"Username",name:"username",autoComplete:"username",as:t,required:!0}),Object(V.jsx)(dt.a,{name:"username",component:"div"}),Object(V.jsx)(dt.b,{margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",autoComplete:"current-password",as:t,required:!0}),Object(V.jsx)(dt.a,{name:"password",component:"div"}),Object(V.jsx)(we.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:r,children:e?"Signup":"Login"})]})}}),Object(V.jsx)(mt.a,{container:!0,children:Object(V.jsx)(mt.a,{item:!0,children:Object(V.jsx)(s.b,{to:"/login",onClick:this.toggleSignup,style:{color:"black"},children:e?"Already have an account? Login":"Don't have an account? Sign Up"})})})]}),Object(V.jsx)("br",{})]})})}}]),n}(a.a.Component);var ft={onLogin:Ze,onSignup:Ke},vt=Object(o.b)((function(e){return{user:e.userModule.user}}),ft)(Ot),xt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={user:null},e.handleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return Object(j.a)(Object(j.a)({},e),{},{user:Object(j.a)(Object(j.a)({},e.user),{},Object(ie.a)({},r,a))})}))},e.onSubmit=function(){var t=Object(m.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=e.state.user,e.props.handleEdit(r);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.setState({user:Object(j.a)({},this.props.user)})}},{key:"render",value:function(){var e=this.state.user;return e?Object(V.jsxs)("form",{className:"edit-user",onSubmit:this.onSubmit,children:[Object(V.jsx)(ee.a,{value:e.username,type:"text",variant:"outlined",label:"Edit Username",name:"username",onChange:this.handleChange}),Object(V.jsx)(ee.a,{value:e.fullname,type:"text",variant:"outlined",label:"Edit Fullname",name:"fullname",onChange:this.handleChange}),Object(V.jsx)("button",{children:"Submit"})]}):Object(V.jsx)(Ae,{})}}]),n}(a.a.Component);var gt=Object(o.b)((function(e){return{user:e.userModule.user}}),null)(xt),yt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={isEdit:!1},e.removeToyReview=function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeReview(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEdit=function(){var t=Object(m.a)(p.a.mark((function t(n){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onEditUser(n);case 2:e.toggleEdit();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleEdit=function(){e.setState((function(t){return Object(j.a)(Object(j.a)({},t),{},{isEdit:!e.state.isEdit})}))},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.user){e.next=3;break}return this.props.history.push("/"),e.abrupt("return");case 3:return t=this.props.user._id,e.next=6,this.props.loadReviews({userId:t});case 6:this.setState({isEdit:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.user,n=e.reviews,r=this.state.isEdit;return t?Object(V.jsxs)("div",{className:"card ".concat(r?"user-edit":""),children:[Object(V.jsxs)("div",{className:"card__header",children:[Object(V.jsx)("div",{className:"card__profile",children:Object(V.jsx)(Ee.a,{children:t.fullname&&(null===t||void 0===t?void 0:t.fullname[0].toUpperCase())||""})}),Object(V.jsx)("div",{className:"card__name",children:Object(V.jsxs)("p",{children:["Hi, ",t.fullname]})}),Object(V.jsx)("div",{className:"card__button",children:Object(V.jsx)("button",{onClick:this.toggleEdit,children:Object(V.jsx)("span",{children:r?"Back":"Edit"})})})]}),Object(V.jsx)("hr",{className:"border"}),Object(V.jsx)("div",{className:"card__insights",children:Object(V.jsx)("div",{className:"card__heading",children:Object(V.jsx)("div",{className:"heading",children:r?"User Edit":"My Reviews"})})}),!r&&Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{className:"insights",children:[n.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(_e,{user:t,removeToyReview:this.removeToyReview,reviews:n})}),!n.length&&Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("span",{children:["You dont have any reviews yet, Check our toys  ",Object(V.jsx)(s.b,{to:"/toy",children:"Here"})]})})]})}),r&&Object(V.jsx)(gt,{handleEdit:this.handleEdit})]}):Object(V.jsx)(Ae,{})}}]),n}(a.a.Component);var wt={loadReviews:Ge,removeReview:Je,onEditUser:function(e){return function(t){N.update(e).then((function(){return t({type:"UPDATE_USER",user:e})})).catch((function(e){me("Cannot update"),console.log("Cannot update user",e)}))}}},Ct=Object(o.b)((function(e){return{user:e.userModule.user,reviews:e.reviewModule.reviews}}),wt)(yt),kt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadReviews({});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.reviews;return Object(V.jsxs)("div",{className:"card",children:[Object(V.jsx)("div",{className:"card__header",children:Object(V.jsx)("div",{className:"card__name",children:Object(V.jsx)("p",{children:"People Review Us:"})})}),Object(V.jsx)("hr",{className:"border"}),Object(V.jsx)("div",{className:"card__insights",children:Object(V.jsx)("div",{className:"card__heading",children:Object(V.jsx)("div",{className:"heading",children:"Store Reviews"})})}),Object(V.jsx)("div",{className:"insights",children:e.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(_e,{reviews:e})})})]})}}]),n}(a.a.Component);var St={loadReviews:Ge},Nt=[{path:"/",component:Y},{path:"/toy",component:ge},{path:"/toy/details/:toyId",component:nt},{path:"/toy/edit/:toyId",component:ct},{path:"/about",component:Z},{path:"/chart",component:ut},{path:"/login",component:vt},{path:"/user",component:Ct},{path:"/review",component:Object(o.b)((function(e){return{reviews:e.reviewModule.reviews}}),St)(kt)}],Tt=n(168),Rt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={msg:null},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=he.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),2500)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(V.jsx)("span",{});var t=this.state.msg.type||"";return Object(V.jsxs)("section",{className:"user-msg "+t,children:[Object(V.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"}),this.state.msg.txt]})}}]),n}(a.a.Component),Et=function(e){var t,n=e.open,r=e.toggleOpen,a=e.user,i=e.onLogout;return Object(V.jsxs)("ul",{className:"right-nav ".concat(n?"open":""),children:[Object(V.jsx)(s.c,{onClick:r,exact:!0,to:"/",children:"Home"}),a&&Object(V.jsx)(s.c,{onClick:r,to:"/user",children:"Profile"}),Object(V.jsx)(s.c,{onClick:r,to:"/toy",children:"Toys"}),Object(V.jsx)(s.c,{onClick:r,to:"/review",children:"Reviews"}),Object(V.jsx)(s.c,{onClick:r,to:"/about",children:"About"}),Object(V.jsx)(s.c,{onClick:r,to:"/chart",children:"Chart"}),a&&Object(V.jsx)(s.c,(t={onClick:r},Object(ie.a)(t,"onClick",i),Object(ie.a)(t,"to","/login"),Object(ie.a)(t,"children","Logout"),t)),!a&&Object(V.jsx)(s.c,{onClick:r,to:"/login",children:"Login"})]})};function At(e){var t=e.open,n=e.toggleOpen,r=e.user,a=e.onLogout;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"burger ".concat(t?"open":""),onClick:n,children:[Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")}),Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")}),Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")})]}),Object(V.jsx)(Et,{open:t,toggleOpen:n,onLogout:a,user:r})]})}var Mt=n(242),_t=n.n(Mt);function It(e){var t=e.user,n=e.cartItem,r=Object(o.c)(),a=function(){var e=Object(m.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),a.stopPropagation(),r(Qe(t,n));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(V.jsxs)("li",{class:"clearfix",children:[Object(V.jsx)("img",{src:"https://robohash.org/".concat(n.name),alt:"item1"}),Object(V.jsxs)("div",{style:{marginTop:"7px"},children:[Object(V.jsx)("span",{class:"item-name",children:n.name}),Object(V.jsxs)("span",{class:"item-price",children:["$",n.price]}),Object(V.jsx)("span",{class:"item-quantity",children:"Quantity: 01"})]}),Object(V.jsx)(_t.a,{onClick:a})]})}function Dt(){var e,t,n=Object(o.d)((function(e){return e.systemModule.isShoppingCart})),r=Object(o.d)((function(e){return e.userModule.user})),a=r&&r.cart?r.cart.reduce((function(e,t){return e+t.price}),0):0;return Object(V.jsx)("div",{class:"container",children:Object(V.jsxs)("div",{class:"shopping-cart",style:{display:n?"block":"none",width:"320px"},onClick:function(e){return e.stopPropagation()},children:[Object(V.jsxs)("div",{class:"shopping-cart-header",children:[Object(V.jsxs)("div",{children:[Object(V.jsx)("i",{class:"fa fa-shopping-cart cart-icon"}),(null===r||void 0===r||null===(e=r.cart)||void 0===e?void 0:e.length)>0&&Object(V.jsx)("span",{class:"badge",children:r.cart.length})]}),Object(V.jsxs)("div",{class:"shopping-cart-total",children:[Object(V.jsx)("span",{class:"lighter-text",children:"Total:"}),Object(V.jsxs)("span",{class:"main-color-text",children:["$",a]})]})]}),Object(V.jsx)("ul",{class:"shopping-cart-items",children:null===r||void 0===r||null===(t=r.cart)||void 0===t?void 0:t.map((function(e,t){return Object(V.jsx)(It,{cartItem:e,user:r},t)}))})]})})}var Bt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={open:!1,isMobile:!1},e.onLogin=function(t){e.props.onLogin(t)},e.onSignup=function(t){e.props.onSignup(t)},e.onLogout=function(){e.props.onLogout()},e.toggleOpen=function(){var t=e.state,n=t.open;t.isMobile&&e.setState({open:!n})},e.handleResize=function(){e.setState({isMobile:window.innerWidth<768})},e.toggleCart=function(){e.props.setIsShoppingCart(!e.props.isShoppingCart)},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){window.innerWidth<768&&this.setState(Object(j.a)(Object(j.a)({},this.state),{},{isMobile:!0})),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e,t=this.props.user;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"navbar",children:[Object(V.jsxs)("div",{className:"logo",children:[Object(V.jsx)(s.b,{to:"/",children:Object(V.jsx)("img",{src:q,alt:"logo"})}),t&&Object(V.jsxs)("a",{className:"cart-symbol",id:"cart",onClick:this.toggleCart,style:{width:this.state.isMobile?"240px":"320px"},children:[Object(V.jsx)("i",{class:"fa fa-shopping-cart"})," Cart",(null===t||void 0===t||null===(e=t.cart)||void 0===e?void 0:e.length)>0&&Object(V.jsx)("span",{class:"badge",children:t.cart.length}),Object(V.jsx)(Dt,{isMobile:this.state.isMobile})]})]}),Object(V.jsx)(At,{user:t,onLogout:this.onLogout,open:this.state.open,toggleOpen:this.toggleOpen})]}),Object(V.jsx)(Rt,{})]})}}]),n}(a.a.Component);var Lt={onLogin:Ze,onSignup:Ke,onLogout:function(){return function(e){N.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){me("Cannot logout"),console.log("Cannot logout",e)}))}},setIsShoppingCart:function(e){return function(t){try{t({type:"SET_CART",isShoppingCart:e})}catch(n){}}}},Ut=Object(o.b)((function(e){return{user:e.userModule.user,isShoppingCart:e.systemModule.isShoppingCart}}),Lt)(Bt),Wt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e={icon:{position:{bottom:{size:0,units:"px"},left:{size:0,units:"px"},type:"fixed"}}};window.addEventListener("load",(function(){new Tt.a(e)}),!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("load",(function(){new Tt.a}),!1)}},{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(Ut,{}),Object(V.jsx)("main",{className:"main-container",children:Object(V.jsx)(z.c,{children:Nt.map((function(e){return Object(V.jsx)(z.a,{exact:!0,component:e.component,path:e.path},e.path)}))})})]})}}]),n}(a.a.Component);n(443);c.a.render(Object(V.jsx)(a.a.StrictMode,{children:Object(V.jsx)(o.a,{store:L,children:Object(V.jsx)(s.a,{children:Object(V.jsx)(Wt,{})})})}),document.getElementById("root"))}},[[444,1,2]]]);
//# sourceMappingURL=main.a22749b0.chunk.js.map