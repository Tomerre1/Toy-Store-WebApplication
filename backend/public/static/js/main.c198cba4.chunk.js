(this["webpackJsonpmister-toy"]=this["webpackJsonpmister-toy"]||[]).push([[0],{440:function(e,t,n){},441:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(19),c=n.n(s),o=n(28),i=n(24),l=n(109),u=n(220),d=n(20),h=n(3),p={toys:[],filterBy:{name:"",inStock:!1,sortBy:"all",selectedOptions:[]}};var j=n(8),b=n.n(j),v=n(18),O=n(222),m="/api/",f=n.n(O).a.create({withCredentials:!0}),g=function(e,t){return S(e,"GET",t)},y=function(e,t){return S(e,"POST",t)},x=function(e,t){return S(e,"PUT",t)},w=function(e,t){return S(e,"DELETE",t)};function S(e){return C.apply(this,arguments)}function C(){return(C=Object(v.a)(b.a.mark((function e(t){var n,a,r,s=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"GET",a=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,f({url:"".concat(m).concat(t),method:n,data:a,params:"GET"===n?a:null});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(a)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var k="loggedinUser",N={login:function(e){return T.apply(this,arguments)},logout:function(){return R.apply(this,arguments)},signup:function(e){return M.apply(this,arguments)},update:function(e){return E.apply(this,arguments)},getLoggedinUser:function(){return JSON.parse(sessionStorage.getItem(k))}};function T(){return(T=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("auth/login",t);case 2:return n=e.sent,sessionStorage.setItem(k,JSON.stringify(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("user/".concat(t._id),t);case 2:return n=e.sent,sessionStorage.setItem(k,JSON.stringify(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("auth/signup",t);case 2:return n=e.sent,sessionStorage.setItem(k,JSON.stringify(n)),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("auth/logout");case 2:return sessionStorage.setItem(k,null),e.abrupt("return",Promise.resolve());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.userService=N;var A={user:N.getLoggedinUser()};var _={reviews:[]};var I={isLoading:!1,isShoppingCart:!1};var D=Object(l.b)({toyModule:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_TOYS":return Object(h.a)(Object(h.a)({},t),{},{toys:n.toys});case"REMOVE_TOY":return e=t.toys.filter((function(e){return e._id!==n.toyId})),Object(h.a)(Object(h.a)({},t),{},{toys:e});case"ADD_TOY":return Object(h.a)(Object(h.a)({},t),{},{toys:[].concat(Object(d.a)(t.toys),[n.toy])});case"UPDATE_TOY":return e=t.toys.map((function(e){return e._id===n.toy._id?n.toy:e})),Object(h.a)(Object(h.a)({},t),{},{toys:e});case"SET_FILTER":return Object(h.a)(Object(h.a)({},t),{},{filterBy:Object(h.a)(Object(h.a)({},t.filterBy),n.filterBy)});default:return Object(h.a)({},t)}},userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=e;switch(t.type){case"UPDATE_USER":n=Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),t.user)});break;case"SET_USER":n=Object(h.a)(Object(h.a)({},e),{},{user:t.user})}return window.userState=n,n},reviewModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_REVIEWS":return Object(h.a)(Object(h.a)({},e),{},{reviews:t.reviews});case"ADD_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:[].concat(Object(d.a)(e.reviews),[t.review])});case"REMOVE_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:e.reviews.filter((function(e){return e._id!==t.reviewId}))});case"UPDATE_REVIEW":return Object(h.a)(Object(h.a)({},e),{},{reviews:e.reviews.map((function(e){return e._id===t.review._id?t.review:e}))});default:return e}},systemModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});case"SET_CART":return Object(h.a)(Object(h.a)({},e),{},{isShoppingCart:t.isShoppingCart});default:return e}}}),L=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.c,B=Object(l.d)(D,L(Object(l.a)(u.a))),U=n(5),W=n(7),P=n(13),F=n(12),q=n(27),z=n.p+"static/media/toyLogo.6931db5e.svg",V=n(1),Y=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){var e=this.props.user;return Object(V.jsx)("div",{className:"home-page full",children:Object(V.jsxs)("div",{className:"hero-text",children:[Object(V.jsxs)("h1",{className:"elegantshadow",children:["Welcome ",e&&Object(V.jsx)("span",{children:e.fullname})," to MasterToy !"]}),Object(V.jsx)("img",{src:z,alt:"MasterToy"}),Object(V.jsx)(o.b,{to:"/toy",children:"Shop Now!"})]})})}}]),n}(r.a.Component);var G=Object(i.b)((function(e){return{user:e.userModule.user}}),null)(Y),H=n(108),J=n(47),$=(n(177),function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={center:{lat:32.109333,lng:34.855499},isInfoWindowOn:!1},e.acordionBranchContent=[{heading:"Tel Aviv Branch",position:{lat:32.09151422942391,lng:34.77710737828437},content:"Even Gbirol Street, 154 ",tel:"03-5856925 ",web:"www.toy-center-tel-aviv.com",open:"Sunday - Thursday: 10am - 8pm"},{heading:"Bat Yam Branch",position:{lat:32.02131898166023,lng:34.745406250953906},content:"Arlozerov Street, 13 ",tel:"03-4549985 ",web:"www.toy-center-bat-yam.com",open:"Sunday - Thursday: 8am - 5pm"},{heading:"Rehovot Branch",position:{lat:31.89531491976764,lng:34.80132105953836},content:"Sderot Nurdau Street, 128  ",tel:"03-4452354 ",web:"www.toy-center-rehovot.com",open:"Sunday - Thursday: 11am - 7pm"}],e.onMapClicked=function(t,n,a){e.setState({center:{lat:a.latLng.lat(),lng:a.latLng.lng()}})},e.onMarkerClicked=function(){e.setState({isInfoWindowOn:!0})},e.onInfoWindowClose=function(){e.setState({isInfoWindowOn:!1})},e.onBranchClick=function(t){e.setState({isInfoWindowOn:!0,currBranchSelected:e.acordionBranchContent[t].position,currBranchDetails:e.acordionBranchContent[t].heading})},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)(H.Map,{google:this.props.google,zoom:10,initialCenter:{lat:32.02393895923443,lng:34.78419219869878},onClick:this.onMapClicked,center:{lat:32.02393895923443,lng:34.78419219869878},containerStyle:{width:"%",height:"500px",position:"relative",margin:"20px"},children:[this.acordionBranchContent.map((function(t,n){return Object(V.jsx)(H.Marker,{position:t.position,name:t.heading,onClick:e.onMarkerClicked},n)})),Object(V.jsx)(H.InfoWindow,{onClose:this.onInfoWindowClose,position:this.state.currBranchSelected,visible:this.state.isInfoWindowOn,children:Object(V.jsx)("div",{children:Object(V.jsx)("h1",{children:this.state.currBranchDetails})})})]}),Object(V.jsx)(J.a,{allowZeroExpanded:!0,children:this.acordionBranchContent.map((function(t,n){return Object(V.jsxs)(J.b,{children:[Object(V.jsx)(J.d,{onClick:function(){return e.onBranchClick("".concat(n))},children:Object(V.jsx)(J.c,{children:t.heading})}),Object(V.jsxs)(J.e,{children:[Object(V.jsx)("h2",{children:t.heading}),Object(V.jsxs)("p",{children:["Addres: ",t.content]}),Object(V.jsxs)("p",{children:["Tel: ",t.tel]}),Object(V.jsxs)("p",{children:["Web: ",t.web]}),Object(V.jsxs)("p",{children:["Open Hours: ",t.open]})]})]},n)}))})]})}}]),n}(a.Component)),K=Object(H.GoogleApiWrapper)({apiKey:"AIzaSyBt9sd91oGMMUTkT3NIS4oMPBRxyAHNZEs"})($),Z=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(V.jsx)("section",{className:"about",children:Object(V.jsx)(K,{})})}}]),n}(r.a.Component),Q=n(94),X=n(241),ee=n(489),te=Object(X.a)(),ne=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={selectedOptions:[],checkedToggle:"All"},e.optionsSlider=[{name:"inStock",label:"All",value:!1},{name:"inStock",label:"In Stock",value:!0}],e.options=[{value:"On wheels",label:"On wheels"},{value:"Box game",label:"Box game"},{value:"Art",label:"Art"},{value:"Baby",label:"Baby"},{value:"Doll",label:"Doll"},{value:"Puzzle",label:"Puzzle"},{value:"Outdoor",label:"Outdoor"}],e.options2=[{value:"all",label:"All",name:"sortBy"},{value:"name",label:"Name",name:"sortBy"},{value:"date",label:"Date",name:"sortBy"},{value:"price",label:"Price",name:"sortBy"}],e.handleChangeSelect=function(t){var n=t.map((function(e){return e}));e.setState({selectedOptions:n},(function(){e.props.handleChange(t)}))},e}return Object(W.a)(n,[{key:"render",value:function(){var e=this,t=this.props.handleChange,n=this.state.selectedOptions;return Object(V.jsx)("form",{className:"toy-filter",onSubmit:function(e){e.preventDefault()},children:Object(V.jsxs)("div",{className:"filter",children:[Object(V.jsx)(ee.a,{type:"search",variant:"outlined",label:"Filter by toy name",name:"name",className:"toy-input",placeholder:"Filter by toy name",onChange:t}),Object(V.jsx)(Q.a,{className:"filter-toy",name:"sortBy",onChange:t,options:this.options2}),Object(V.jsx)(Q.a,{onChange:this.handleChangeSelect,closeMenuOnSelect:!1,components:te,isMulti:!0,value:n,options:this.options}),Object(V.jsx)("div",{className:"center",children:Object(V.jsxs)("div",{className:"switches-container",children:[this.optionsSlider.map((function(n){return Object(V.jsx)("input",{type:"radio",onChange:function(a){t(a),e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{checkedToggle:n.label})}))},id:n.label,name:n.name,value:n.value,checked:e.state.checkedToggle===n.label})})),this.optionsSlider.map((function(e){return Object(V.jsx)("label",{htmlFor:e.label,children:e.label})})),Object(V.jsx)("div",{className:"switch-wrapper",children:Object(V.jsx)("div",{className:"switch",children:this.optionsSlider.map((function(e){return Object(V.jsx)("div",{children:e.label})}))})})]})})]})})}}]),n}(r.a.Component);function ae(e){var t=e.toy,n=e.onRemoveToy,a=e.onEditToy,r=e.user;return Object(V.jsx)(o.b,{to:"/toy/details/".concat(t._id),children:Object(V.jsxs)("li",{className:"toy-preview",children:[Object(V.jsx)("p",{children:t.name}),Object(V.jsx)("img",{src:"https://robohash.org/".concat(t.name),alt:"toy"}),Object(V.jsx)("span",{children:Object(V.jsxs)("p",{children:["Price:",t.price.toLocaleString(),"$"]})}),!t.inStock.value&&Object(V.jsx)("span",{className:"sold-out",children:"Sold out"}),r&&r.isAdmin&&Object(V.jsxs)("div",{className:"toy-preview-btns",children:[Object(V.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),n(t._id)},className:"trash-btn",children:Object(V.jsx)("i",{className:"fas fa-trash"})}),Object(V.jsx)("button",{onClick:function(e){e.preventDefault(),e.stopPropagation(),a(t._id)},className:"edit-btn",children:Object(V.jsx)("i",{className:"fas fa-edit"})})]})]})})}function re(e){var t=e.toys,n=e.onRemoveToy,a=e.onEditToy,r=e.user;return Object(V.jsx)("div",{className:"toy-container",children:Object(V.jsx)("ul",{className:"toy-list",children:t.map((function(e){return Object(V.jsx)(ae,{toy:e,user:r,onEditToy:a,onRemoveToy:n},e._id)}))})})}var se=n(16),ce=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={toy:{name:"",price:"",labels:[],inStock:[]},options:[],inStockOptions:[{value:!0,label:"Yes"},{value:!1,label:"No"}]},e.handleChange=function(t){var n="number"===t.target.type?+t.target.value:t.target.value,a=t.target.name;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:Object(h.a)(Object(h.a)({},e.toy),{},Object(se.a)({},a,n))})}))},e.handleSelectChange=function(t){var n=t;n.length>3||e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:Object(h.a)(Object(h.a)({},e.toy),{},{labels:n})})}))},e.handleSelectChangeInStock=function(t){var n=t;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:Object(h.a)(Object(h.a)({},e.toy),{},{inStock:n})})}))},e.onSubmit=function(t){t.preventDefault();var n=e.props,a=n.onAddToy,r=n.onToggleAdd;a(e.state.toy),r()},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.loadLabels()}},{key:"loadLabels",value:function(){var e=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"].map((function(e){return{value:e.toLowerCase(),label:e}}));this.setState((function(t){return Object(h.a)(Object(h.a)({},t),{},{options:e})}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.toy,a=t.options,r=t.inStockOptions,s=this.props.onToggleAdd;return Object(V.jsx)("div",{className:"add-toy",children:Object(V.jsxs)("form",{onSubmit:function(t){e.onSubmit(t)},children:[Object(V.jsx)("label",{htmlFor:"name",children:Object(V.jsx)("input",{type:"text",name:"name",placeholder:"Enter toy name ",id:"name",value:n.name,onChange:this.handleChange,required:!0})}),Object(V.jsx)("label",{htmlFor:"price",children:Object(V.jsx)("input",{type:"number",name:"price",placeholder:"Enter toy price",id:"price",value:n.price,onChange:this.handleChange,required:!0})}),Object(V.jsx)(Q.a,{className:"select",value:n.labels,isMulti:!0,onChange:this.handleSelectChange,options:a,placeholder:"Choose up to 3 labels :"}),Object(V.jsx)(Q.a,{className:"select",value:n.inStock,onChange:this.handleSelectChangeInStock,options:r,placeholder:"In stock?"}),Object(V.jsxs)("div",{className:"add-btns",children:[Object(V.jsx)("button",{className:"btn add",type:"submit",children:Object(V.jsx)("span",{className:"fas fa-plus"})}),Object(V.jsx)("button",{className:"btn cancel",onClick:s,children:Object(V.jsx)("span",{className:"fas fa-undo-alt"})})]})]})})}}]),n}(r.a.Component),oe={query:function(e){return ie.apply(this,arguments)},getById:function(e){return le.apply(this,arguments)},save:function(e){return ue.apply(this,arguments)},remove:function(e){return he.apply(this,arguments)},update:function(e){return de.apply(this,arguments)}};function ie(){return(ie=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("toy",{params:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(){return(le=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g("toy/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(){return(ue=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("toy",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(){return(de=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("toy",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return(he=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("toy/".concat(t));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.ts=oe;var pe={on:function(e,t){var n=function(e){var n=e.detail;t(n)};return window.addEventListener(e,n),function(){window.removeEventListener(e,n)}},emit:function(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}};function je(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";pe.emit("show-user-msg",{txt:e,type:t})}function be(e){je(e,"success")}function ve(e){je(e,"danger")}function Oe(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.query(e);case 3:a=t.sent,n({type:"SET_TOYS",toys:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),ve("Cannot load toys");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function me(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.update(e);case 3:return a=t.sent,n({type:"UPDATE_TOY",toy:a}),be("Toy updated"),t.abrupt("return",a);case 9:t.prev=9,t.t0=t.catch(0),ve("Cannot update toy"),console.log("Cannot save toy",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}window.myBus=pe,window.showUserMsg=je;var fe=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isAdd:!1},e.onRemoveToy=function(t){e.props.onRemoveToy(t)},e.onAddToy=function(t){t.labels=t.labels.map((function(e){return e.label})),e.props.onAddToy(t),e.onToggleAdd()},e.onToggleAdd=function(){e.setState({isAdd:!e.state.isAdd})},e.onEditToy=function(t){e.props.history.push("/toy/edit/".concat(t))},e.onHandleChange=function(t){e.props.handleChange(t,e.props.filterBy)},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.props.loadToys(this.props.filterBy)}},{key:"componentWillUnmount",value:function(){this.props.resetFilter()}},{key:"render",value:function(){var e=this.props,t=e.toys,n=e.user,a=this.state.isAdd;return Object(V.jsxs)("main",{className:"toy-app",children:[Object(V.jsx)(ne,{handleChange:this.onHandleChange}),a&&n&&n.isAdmin&&Object(V.jsx)(ce,{onAddToy:this.onAddToy,onToggleAdd:this.onToggleAdd}),!a&&n&&n.isAdmin&&Object(V.jsx)("div",{className:"wrap",children:Object(V.jsx)("button",{onClick:this.onToggleAdd,children:"Add Toy"})}),Object(V.jsx)(re,{toys:t,user:n,onRemoveToy:this.onRemoveToy,onEditToy:this.onEditToy})]})}}]),n}(r.a.Component);var ge={loadToys:Oe,onRemoveToy:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.remove(e);case 3:n({type:"REMOVE_TOY",toyId:e}),be("Toy removed"),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),ve("Cannot remove toy"),console.log("Cannot remove toy",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},onAddToy:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,oe.save(e);case 3:a=t.sent,n({type:"ADD_TOY",toy:a}),console.log("Added toy",a.data),be("Toy added"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Cannot add toy",t.t0),ve("Cannot add toy");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},onEditToy:me,handleChange:function(e,t){return function(n){var a,r,s;Array.isArray(e)?s={selectedOptions:e.map((function(e){return e.label}))}:e.label&&e.value?s=Object(se.a)({},e.name,e.value):(a=e.target.name,r=e.target.value,s=Object(se.a)({},a,r)),n({type:"SET_FILTER",filterBy:s}),Oe(Object(h.a)(Object(h.a)({},t),s))(n)}},resetFilter:function(){return function(e){e({type:"SET_FILTER",filterBy:{name:"",inStock:!0,sortBy:"all",selectedOptions:[]}})}}},ye=Object(i.b)((function(e){return{toys:e.toyModule.toys,filterBy:e.toyModule.filterBy,user:e.userModule.user}}),ge)(fe),xe=n(227),we=(n(303),n(490)),Se=n(491),Ce=n(493),ke=n(231),Ne=n.n(ke),Te=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={open:e.props.open,review:{comment:"",rating:0},hover:-1},e.labels={1:"Useless",2:"Poor",3:"Ok",4:"Good",5:"Excellent"},e.handleChange=function(t){var n=t.target,a=n.name,r="number"===n.type?+n.value:n.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{review:Object(h.a)(Object(h.a)({},e.review),{},Object(se.a)({},a,r))})}))},e.onAddReview=function(t){t.preventDefault();var n=e.state,a=n.review,r=n.hover,s=e.state.review.rating;s&&(e.props.toggleModal(),a.comment=e.labels[-1!==r?r:s]+": "+a.comment,e.props.addToyReview(a),e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{review:Object(h.a)(Object(h.a)({},e.review),{},{rating:null}),open:!1})})))},e.setRating=function(t){var n=t.target;e.setState((function(e){return{review:Object(h.a)(Object(h.a)({},e.review),{},{rating:+n.value})}}))},e.setHover=function(t){e.setState({hover:t})},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.setState({review:{comment:"",rating:null},open:this.props.open})}},{key:"render",value:function(){var e=this,t=this.state.review,n=t.comment,a=t.rating,r=this.state.hover,s=this.props,c=s.open,o=s.toggleModal;return Object(V.jsx)("div",{children:Object(V.jsx)(xe.a,{open:c,onClose:o,children:Object(V.jsxs)("form",{className:"review-add",onSubmit:this.onAddReview,children:[Object(V.jsx)("h2",{children:"Review"}),Object(V.jsxs)("div",{className:"modal-body",children:[Object(V.jsx)(ee.a,{id:"outlined-multiline-flexible",label:"Enter Review",variant:"outlined",type:"text",name:"comment",multiline:!0,rows:4,value:n,color:"primary",onChange:this.handleChange,required:!0}),Object(V.jsxs)("div",{className:"modal-rating",children:[Object(V.jsx)(Se.a,{onChange:this.setRating,size:"large",onChangeActive:function(t,n){e.setHover(n)},emptyIcon:Object(V.jsx)(Ne.a,{style:{opacity:.55},fontSize:"inherit"}),value:a}),-1!==r&&Object(V.jsx)(Ce.a,{sx:{ml:2},children:this.labels[-1!==r?r:a]})]})]}),Object(V.jsx)(we.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",children:"Add Review"})]})})})}}]),n}(r.a.Component),Ee={makeId:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<e;a++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},makeLorem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=["The sky","above","the port","was","the color of television","tuned","to","a dead channel",".","All","this happened","more or less",".","I","had","the story","bit by bit","from various people","and","as generally","happens","in such cases","each time","it","was","a different story",".","It","was","a pleasure","to","burn"],n="";for(;e>0;)e--,n+=t[Math.floor(Math.random()*t.length)]+" ";return n},getRandomIntInclusive:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e},formateDate:function(e){return("0"+(e=new Date(e)).getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear()+", "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}};var Me=n(494);function Re(e){var t=e.review,n=e.removeToyReview,a=e.user;return t.toy?Object(V.jsxs)("section",{className:"review",children:[a&&(a._id===t.user._id||a.hasOwnProperty("isAdmin"))&&Object(V.jsx)("button",{onClick:function(){n(t._id)},className:"delete-review pointer",children:"\xd7"}),Object(V.jsxs)("div",{className:"review-header",children:[Object(V.jsx)(Me.a,{children:t.user.fullname[0].toUpperCase()}),Object(V.jsxs)("p",{children:[" ",t.user.fullname]}),Object(V.jsx)(Se.a,{value:t.rating,readOnly:!0})]}),Object(V.jsxs)("div",{className:"review-comment",children:[Object(V.jsx)("p",{className:"toy-name",children:t.toy.name}),Object(V.jsxs)("p",{children:[" ",t.comment]})]}),Object(V.jsx)("span",{children:Ee.formateDate(t.createdAt)})]}):Object(V.jsx)("div",{children:"Loading..."})}function Ae(e){var t=e.reviews,n=e.removeToyReview,a=e.user;return Object(V.jsx)("div",{className:"reviews-list",children:t.map((function(e,t){return Object(V.jsx)(Re,{user:a,removeToyReview:n,review:e},t)}))})}function _e(e){var t=e.message;return Object(V.jsxs)("div",{className:"ai-person-container",children:[Object(V.jsx)("div",{className:t.writer,children:Object(V.jsx)("p",{children:t.text})}),Object(V.jsx)("span",{className:"".concat(t.writer,"-date"),children:t.date})]})}function Ie(e){var t=e.messages;return Object(V.jsx)(r.a.Fragment,{children:t.map((function(e,t){return Object(V.jsx)(_e,{message:e},t)}))})}var De=n(232),Le=n.n(De),Be=function(){var e=null;return{setup:function(){e=Le()("")},on:function(t,n){e.on(t,n)},off:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&(n?e.off(t,n):e.removeAllListeners(t))},emit:function(t,n){e.emit(t,n)},terminate:function(){e=null}}}();window.socketService=Be,Be.setup(),Be.on("review-about-you",(function(e){console.log("Review about me!",e)}));var Ue=n(233),We=n.n(Ue),Pe=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={message:{text:"",date:null},messages:[],user:e.props.user,typingMsg:null},e.addMsg=function(t){t.writer=e.state.user&&t.user===e.state.user.fullname?"person":"ai",e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{messages:[].concat(Object(d.a)(e.messages),[t])})}))},e.addTypingMsg=function(t){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{typingMsg:t})}))},e.onChangeMessage=function(t){var n=t.target.value,a=e.props.user,r=n.length>0?"".concat((null===a||void 0===a?void 0:a.fullname)||"Guest"," is typing..."):null;Be.emit("chat typing",r),e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{message:Object(h.a)(Object(h.a)({},e.message),{},{text:n})})}))},e.onSubmitMessage=function(t){t.preventDefault();var n=e.state,a=n.message,r=n.user,s=(new Date).toLocaleString();a.writer="person";var c=(null===r||void 0===r?void 0:r.fullname)||"Guest",o="".concat(c,": ").concat(a.text);Be.emit("chat newMsg",{text:o,user:c,date:s}),Be.emit("chat typing",null),e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{message:{text:"",date:null}})}))},e.aiResponse=function(){var t=e.state.messages,n={text:"Support: Yes honey!",date:(new Date).toLocaleString(),writer:"ai"};setTimeout((function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{messages:[].concat(Object(d.a)(t),[n])})}))}),1e3)},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){Be.setup(),Be.emit("chat topic",this.props.toy._id),Be.on("chat addMsg",this.addMsg),Be.on("chat addTypingMsg",this.addTypingMsg)}},{key:"componentWillUnmount",value:function(){Be.off("chat addMsg",this.addMsg),Be.off("chat addTypingMsg",this.addTypingMsg),Be.terminate()}},{key:"render",value:function(){var e=this.state,t=e.messages,n=e.message,a=e.typingMsg;return Object(V.jsxs)("div",{className:"chat-window flex",children:[Object(V.jsxs)("div",{className:"chat-box",children:[Object(V.jsx)("h1",{children:"Lets Chat"}),a&&Object(V.jsx)("p",{children:a}),Object(V.jsx)("div",{className:"chat-content",children:Object(V.jsx)(Ie,{messages:t})}),Object(V.jsx)("div",{className:"chat-controller",children:Object(V.jsxs)("form",{className:"flex justify-space-between",onSubmit:this.onSubmitMessage,children:[Object(V.jsx)(ee.a,{required:!0,variant:"outlined",label:"Chat with me",type:"text",name:"chat-input",value:n.text,onChange:this.onChangeMessage}),Object(V.jsx)(we.a,{type:"submit",color:"primary",children:Object(V.jsx)(We.a,{})})]})})]}),Object(V.jsx)("button",{onClick:this.props.toggleChat,className:"closeChat",children:"x"})]})}}]),n}(r.a.Component);function Fe(e){return Object(V.jsx)("section",{className:"popup",children:Object(V.jsx)("div",{className:"main",children:e.children})})}var qe={add:function(e){return Ye.apply(this,arguments)},query:function(e){return ze.apply(this,arguments)},remove:function(e){return Ve.apply(this,arguments)}};function ze(){return(ze=Object(v.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t?"?userId=".concat(t.hasOwnProperty("userId")?t.userId:"","&toyId=").concat(t.hasOwnProperty("toyId")?t.toyId:""):"",e.next=3,g("review".concat(n));case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return(Ve=Object(v.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("review/".concat(t," "));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(v.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("review",t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.query(e);case 3:a=t.sent,n({type:"SET_REVIEWS",reviews:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in loadReviews",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function He(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("reviewId",e),t.next=4,qe.remove(e);case 4:n({type:"REMOVE_REVIEW",reviewId:e}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("ReviewActions: err in removeReview",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var Je=n(234),$e=n.n(Je),Ke=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={toy:null,isChatOpen:!1,isReviewAdd:!1},e.toggleChat=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{isChatOpen:!e.isChatOpen})}))},e.toggleReviewAdd=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{isReviewAdd:!e.isReviewAdd})}))},e.escFunction=function(t){27===t.keyCode&&e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{isChatOpen:!1})}))},e.toggleModal=function(){e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{isReviewAdd:!e.isReviewAdd})}))},e.addToyReview=function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.match.params.toyId,n.toyId=a,t.next=4,e.props.addReview(n);case 4:return t.next=6,e.props.loadReviews({toyId:a});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeToyReview=function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeReview(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,oe.getById(t);case 3:return n=e.sent,e.next=6,this.props.loadReviews({toyId:t});case 6:this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:n})})),document.body.addEventListener("keydown",this.escFunction,!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("keydown",this.escFunction,!1)}},{key:"render",value:function(){var e=this.state,t=e.toy,n=e.isChatOpen,a=e.isReviewAdd,r=this.props,s=r.user,c=r.reviews;return t?Object(V.jsxs)("div",{className:"container",children:[Object(V.jsx)("div",{className:"product-image",children:Object(V.jsx)("img",{src:"https://robohash.org/".concat(t.name),alt:"",className:"product-logo"})}),Object(V.jsxs)("div",{className:"product-details",children:[Object(V.jsxs)("header",{children:[Object(V.jsx)("h1",{className:"title",children:t.name}),Object(V.jsxs)("div",{className:"price",children:[Object(V.jsxs)("span",{className:"before",children:[2*t.price,"$"]}),Object(V.jsxs)("span",{className:"current",children:[t.price,"$"]})]})]}),Object(V.jsxs)("article",{children:[Object(V.jsx)("h5",{children:"Description"}),Object(V.jsx)("p",{children:"Lorem ipsum dolorl sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."})]}),Object(V.jsx)("div",{className:"controls",children:Object(V.jsx)("div",{className:"labels",children:Object(V.jsxs)("div",{className:"toy-labels",children:[t.labels.map((function(e,t){return Object(V.jsx)("div",{children:Object(V.jsx)("p",{className:"label",children:e})},t)})),Object(V.jsx)("div",{children:Object(V.jsx)("p",{className:"label-".concat(t.inStock?"green":"red"),children:t.inStock?"In Stock":"Sold Out"})})]})})}),!s&&Object(V.jsxs)("p",{children:["To write a review please login ",Object(V.jsx)(o.b,{to:"/login",children:" Here"})]}),c.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(Ae,{user:s,removeToyReview:this.removeToyReview,reviews:c})}),Object(V.jsx)(Te,{}),n&&Object(V.jsx)(Fe,{children:Object(V.jsx)(Pe,{toy:t,user:s,toggleChat:this.toggleChat})}),!n&&Object(V.jsx)("button",{onClick:this.toggleChat,className:"chat-button",children:Object(V.jsx)($e.a,{})}),Object(V.jsxs)("div",{className:"details-btns",children:[Object(V.jsx)(o.b,{to:"/toy",className:"back",type:"button",children:Object(V.jsx)("span",{children:"Back Toys"})}),s&&Object(V.jsx)("button",{className:"back",onClick:this.toggleReviewAdd,children:Object(V.jsx)("span",{children:"Add Review"})})]}),Object(V.jsx)(Te,{open:a,addToyReview:this.addToyReview,toggleModal:this.toggleModal})]})]}):Object(V.jsx)("div",{children:" Loading from Toy Details..."})}}]),n}(r.a.Component);var Ze={loadReviews:Ge,removeReview:He,addReview:function(e){return function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,qe.add(e);case 3:return a=t.sent,n({type:"ADD_REVIEW",review:a}),t.abrupt("return",a);case 8:t.prev=8,t.t0=t.catch(0),console.log("ReviewActions: err in addReview",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}},Qe=Object(i.b)((function(e){return{user:e.userModule.user,reviews:e.reviewModule.reviews}}),Ze)(Ke),Xe=n(479),et=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={toy:null},e.handleChange=function(t){var n=t.target.name,a="number"===t.target.type?+t.target.value:t.target.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:Object(h.a)(Object(h.a)({},e.toy),{},Object(se.a)({},n,a))})}))},e.onSubmit=function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),a=e.state.toy,t.next=4,e.props.onEditToy(a);case 4:e.props.history.push("/toy");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.toyId,e.next=3,oe.getById(t);case 3:n=e.sent,this.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{toy:n})}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.toy;return e?Object(V.jsxs)("div",{className:"container",children:[Object(V.jsx)("div",{className:"product-image",children:Object(V.jsx)("img",{src:"https://robohash.org/".concat(e.name),alt:"",className:"product-logo"})}),Object(V.jsxs)("div",{className:"product-details",children:[Object(V.jsx)("header",{children:Object(V.jsx)("h1",{className:"title",children:e.name})}),Object(V.jsxs)("form",{className:"edit-toy",onSubmit:this.onSubmit,children:[Object(V.jsx)(Xe.a,{type:"text",name:"name",value:e.name,onChange:this.handleChange,required:!0}),Object(V.jsx)(Xe.a,{type:"number",name:"price",value:e.price,onChange:this.handleChange,required:!0}),Object(V.jsx)(we.a,{type:"submit",className:"back",children:"Submit Edit"})]})]})]}):Object(V.jsx)("div",{children:" Loading..."})}}]),n}(r.a.Component);var tt={onEditToy:me},nt=Object(i.b)((function(e){return{}}),tt)(et),at=n(133);function rt(e){var t=e.data,n=(e.labels,{labels:["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],datasets:[{label:"# of Toys",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(255, 255, 100, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(255, 255, 100, 1)"],borderWidth:3}]});return Object(V.jsx)(at.b,{data:n,width:350,height:350,options:{maintainAspectRatio:!1}})}function st(e){var t=e.data,n=e.toys.map((function(e){return e.price})).sort((function(e,t){return e-t})),a={labels:n=Object(d.a)(new Set(n)),datasets:[{label:"# of Toys",data:t,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 199, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 199, 64, 1)"],borderWidth:3}]};return Object(V.jsx)(at.a,{data:a,width:350,height:350,options:{maintainAspectRatio:!1}})}var ct=Object(i.b)((function(e){return{toys:e.toyModule.toys}}),null)((function(){var e=Object(i.c)((function(e){return e.toyModule.toys}));console.log("%c  toys:","color: white;background: red;",e);return Object(V.jsxs)("div",{className:"charts",children:[Object(V.jsxs)("div",{className:"chart",children:[Object(V.jsx)("h1",{children:"Label statistics:"}),Object(V.jsx)("div",{children:Object(V.jsx)(rt,{data:function(){for(var t=["On wheels","Box game","Art","Baby","Doll","Puzzle","Outdoor"],n=[],a=0;a<t.length;a++)n.push(0);for(var r=0;r<e.length;r++)for(var s=0;s<e[r].labels.length;s++)n[t.indexOf(e[r].labels[s])]++;return n}()})})]}),Object(V.jsxs)("div",{className:"chart",children:[Object(V.jsx)("h1",{children:"Price statistics:"}),Object(V.jsx)("div",{children:Object(V.jsx)(st,{data:function(){var t=e.map((function(e){return e.price})).sort((function(e,t){return e-t}));t=Object(d.a)(new Set(t));for(var n=[],a=0;a<t.length;a++)n.push(0);for(var r=0;r<e.length;r++)n[t.indexOf(e[r].price)]++;return n}(),toys:e})})]})]})}));function ot(e){return function(t){return N.login(e).then((function(e){return t({type:"SET_USER",user:e}),e})).catch((function(e){ve("Cannot login"),console.log("Cannot login",e)}))}}function it(e){return function(t){return N.signup(e).then((function(e){return t({type:"SET_USER",user:e}),e})).catch((function(e){ve("Cannot signup"),console.log("Cannot signup",e)}))}}var lt=n(66),ut=n(239),dt=n.n(ut),ht=n(486),pt=n(487),jt=n(488),bt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isSignup:!1},e.AcordionContent=[{heading:"Want to be admin?",content:"Login with this credentials Username: admin and Password: admin "}],e.toggleSignup=function(){e.setState({isSignup:!e.state.isSignup})},e.validate=function(t){var n={};return t.username||(n.username="Required username"),t.password||(n.password="Required password"),e.state.isSignup&&!t.fullname&&(n.fullname="Required fullname"),n},e.onFormSubmit=function(){var t=Object(v.a)(b.a.mark((function t(n,a){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=a.setSubmitting,t.prev=1,!e.state.isSignup){t.next=8;break}return t.next=5,e.props.onSignup(n);case 5:t.t0=t.sent,t.next=11;break;case 8:return t.next=10,e.props.onLogin(n);case 10:t.t0=t.sent;case 11:t.t0?e.props.history.push("/"):e.state.isSignup?ve("User already exists"):ve("Wrong credentials"),t.next=18;break;case 15:t.prev=15,t.t1=t.catch(1),console.log(t.t1);case 18:return t.prev=18,r(!1),t.finish(18);case 21:case"end":return t.stop()}}),t,null,[[1,15,18,21]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.props.user&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.isSignup,t=function(e){return Object(V.jsx)(ee.a,Object(h.a)(Object(h.a)({},e),{},{variant:"outlined",color:"primary"}))};return Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)(ht.a,{component:"main",className:"login-container",maxWidth:"xs",children:[Object(V.jsxs)("div",{className:"flex column align-center",children:[Object(V.jsx)(Me.a,{className:"avatar",children:Object(V.jsx)(dt.a,{})}),Object(V.jsx)(pt.a,{component:"h1",variant:"h5",children:e?"Signup":"Login"}),Object(V.jsx)(lt.d,{initialValues:{fullname:"",username:"",password:""},validate:this.validate,onSubmit:this.onFormSubmit,children:function(n){var a=n.isSubmitting;return Object(V.jsxs)(lt.c,{style:{width:"100%"},children:[e&&Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(lt.b,{variant:"outlined",margin:"normal",fullWidth:!0,name:"fullname",label:"Full Name",type:"text",autoComplete:"current-password",as:t,required:!0}),Object(V.jsx)(lt.a,{name:"fullname",component:"div"})]}),Object(V.jsx)(lt.b,{margin:"normal",fullWidth:!0,label:"Username",name:"username",autoComplete:"username",as:t,required:!0}),Object(V.jsx)(lt.a,{name:"username",component:"div"}),Object(V.jsx)(lt.b,{margin:"normal",fullWidth:!0,name:"password",label:"Password",type:"password",autoComplete:"current-password",as:t,required:!0}),Object(V.jsx)(lt.a,{name:"password",component:"div"}),Object(V.jsx)(we.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:a,children:e?"Signup":"Login"})]})}}),Object(V.jsx)(jt.a,{container:!0,children:Object(V.jsx)(jt.a,{item:!0,children:Object(V.jsx)(o.b,{to:"/login",onClick:this.toggleSignup,style:{color:"black"},children:e?"Already have an account? Login":"Don't have an account? Sign Up"})})})]}),Object(V.jsx)("br",{}),Object(V.jsx)(J.a,{className:"about-acord",allowZeroExpanded:!0,allowMultipleExpanded:!0,children:this.AcordionContent.map((function(e,t){return Object(V.jsxs)(J.b,{children:[Object(V.jsx)(J.d,{children:Object(V.jsx)(J.c,{children:e.heading})}),Object(V.jsx)(J.e,{children:Object(V.jsx)("p",{children:e.content})})]},t)}))})]})})}}]),n}(r.a.Component);var vt={onLogin:ot,onSignup:it},Ot=Object(i.b)((function(e){return{user:e.userModule.user}}),vt)(bt),mt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={user:null},e.handleChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState((function(e){return Object(h.a)(Object(h.a)({},e),{},{user:Object(h.a)(Object(h.a)({},e.user),{},Object(se.a)({},a,r))})}))},e.onSubmit=function(){var t=Object(v.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),a=e.state.user,e.props.handleEdit(a);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){this.setState({user:Object(h.a)({},this.props.user)})}},{key:"render",value:function(){var e=this.state.user;return e?Object(V.jsxs)("form",{className:"edit-user",onSubmit:this.onSubmit,children:[Object(V.jsx)(ee.a,{value:e.username,type:"text",variant:"outlined",label:"Edit Username",name:"username",onChange:this.handleChange}),Object(V.jsx)(ee.a,{value:e.fullname,type:"text",variant:"outlined",label:"Edit Fullname",name:"fullname",onChange:this.handleChange}),Object(V.jsx)("button",{children:"Submit"})]}):Object(V.jsx)("div",{children:" Loading..."})}}]),n}(r.a.Component);var ft=Object(i.b)((function(e){return{user:e.userModule.user}}),null)(mt),gt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isEdit:!1},e.removeToyReview=function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeReview(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleEdit=function(){var t=Object(v.a)(b.a.mark((function t(n){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onEditUser(n);case 2:e.toggleEdit();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleEdit=function(){e.setState((function(t){return Object(h.a)(Object(h.a)({},t),{},{isEdit:!e.state.isEdit})}))},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.user){e.next=3;break}return this.props.history.push("/"),e.abrupt("return");case 3:return t=this.props.user._id,e.next=6,this.props.loadReviews({userId:t});case 6:this.setState({isEdit:!1});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.user,n=e.reviews,a=this.state.isEdit;return t?Object(V.jsxs)("div",{className:"card",children:[Object(V.jsxs)("div",{className:"card__header",children:[Object(V.jsx)("div",{className:"card__profile",children:Object(V.jsx)(Me.a,{children:t.fullname&&(null===t||void 0===t?void 0:t.fullname[0].toUpperCase())||""})}),Object(V.jsx)("div",{className:"card__name",children:Object(V.jsxs)("p",{children:["Hi, ",t.fullname]})}),Object(V.jsx)("div",{className:"card__button",children:Object(V.jsx)("button",{onClick:this.toggleEdit,children:Object(V.jsx)("span",{children:a?"Back":"Edit"})})})]}),Object(V.jsx)("hr",{className:"border"}),Object(V.jsx)("div",{className:"card__insights",children:Object(V.jsx)("div",{className:"card__heading",children:Object(V.jsx)("div",{className:"heading",children:a?"User Edit":"My Reviews"})})}),!a&&Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("div",{className:"insights",children:[n.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(Ae,{user:t,removeToyReview:this.removeToyReview,reviews:n})}),!n.length&&Object(V.jsx)(V.Fragment,{children:Object(V.jsxs)("span",{children:["You dont have any reviews yet, Check our toys  ",Object(V.jsx)(o.b,{to:"/toy",children:"Here"})]})})]})}),a&&Object(V.jsx)(ft,{handleEdit:this.handleEdit})]}):Object(V.jsx)("div",{children:"Loading..."})}}]),n}(r.a.Component);var yt={loadReviews:Ge,removeReview:He,onEditUser:function(e){return function(t){N.update(e).then((function(){return t({type:"UPDATE_USER",user:e})})).catch((function(e){ve("Cannot update"),console.log("Cannot update user",e)}))}}},xt=Object(i.b)((function(e){return{user:e.userModule.user,reviews:e.reviewModule.reviews}}),yt)(gt),wt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=Object(v.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadReviews({});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.reviews;return Object(V.jsxs)("div",{className:"card",children:[Object(V.jsx)("div",{className:"card__header",children:Object(V.jsx)("div",{className:"card__name",children:Object(V.jsx)("p",{children:"People Review Us:"})})}),Object(V.jsx)("hr",{className:"border"}),Object(V.jsx)("div",{className:"card__insights",children:Object(V.jsx)("div",{className:"card__heading",children:Object(V.jsx)("div",{className:"heading",children:"Store Reviews"})})}),Object(V.jsx)("div",{className:"insights",children:e.length>0&&Object(V.jsx)("div",{className:"reviews-container",children:Object(V.jsx)(Ae,{reviews:e})})})]})}}]),n}(r.a.Component);var St={loadReviews:Ge},Ct=[{path:"/",component:G},{path:"/toy",component:ye},{path:"/toy/details/:toyId",component:Qe},{path:"/toy/edit/:toyId",component:nt},{path:"/about",component:Z},{path:"/chart",component:ct},{path:"/login",component:Ot},{path:"/user",component:xt},{path:"/review",component:Object(i.b)((function(e){return{reviews:e.reviewModule.reviews}}),St)(wt)}],kt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={msg:null},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.removeEvent=pe.on("show-user-msg",(function(t){e.setState({msg:t}),setTimeout((function(){e.setState({msg:null})}),2500)}))}},{key:"componentWillUnmount",value:function(){this.removeEvent()}},{key:"render",value:function(){var e=this;if(!this.state.msg)return Object(V.jsx)("span",{});var t=this.state.msg.type||"";return Object(V.jsxs)("section",{className:"user-msg "+t,children:[Object(V.jsx)("button",{onClick:function(){e.setState({msg:null})},children:"x"}),this.state.msg.txt]})}}]),n}(r.a.Component),Nt=function(e){var t,n=e.open,a=e.toggleOpen,r=e.user,s=e.onLogout;return Object(V.jsxs)("ul",{className:"right-nav ".concat(n?"open":""),children:[Object(V.jsx)(o.c,{onClick:a,exact:!0,to:"/",children:"Home"}),r&&Object(V.jsx)(o.c,{onClick:a,to:"/user",children:"Profile"}),Object(V.jsx)(o.c,{onClick:a,to:"/toy",children:"Toys"}),Object(V.jsx)(o.c,{onClick:a,to:"/review",children:"Reviews"}),Object(V.jsx)(o.c,{onClick:a,to:"/about",children:"About"}),Object(V.jsx)(o.c,{onClick:a,to:"/chart",children:"Chart"}),r&&Object(V.jsx)(o.c,(t={onClick:a},Object(se.a)(t,"onClick",s),Object(se.a)(t,"to","/login"),Object(se.a)(t,"children","Logout"),t)),!r&&Object(V.jsx)(o.c,{onClick:a,to:"/login",children:"Login"})]})};function Tt(e){var t=e.open,n=e.toggleOpen,a=e.user,r=e.onLogout;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"burger ".concat(t?"open":""),onClick:n,children:[Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")}),Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")}),Object(V.jsx)("div",{className:"burgers ".concat(t?"open":"")})]}),Object(V.jsx)(Nt,{open:t,toggleOpen:n,onLogout:r,user:a})]})}function Et(e){var t=e.isMobile;console.log("%c  isMobile:","color: white;background: red;",t);var n=Object(i.c)((function(e){return e.systemModule.isShoppingCart}));return console.log("%c  isShoppingCart:","color: white;background: red;",n),Object(V.jsx)("div",{class:"container",children:Object(V.jsxs)("div",{class:"shopping-cart",style:{display:n?"block":"none",width:"320px"},onClick:function(e){return e.stopPropagation()},children:[Object(V.jsxs)("div",{class:"shopping-cart-header",children:[Object(V.jsxs)("div",{children:[Object(V.jsx)("i",{class:"fa fa-shopping-cart cart-icon"}),Object(V.jsx)("span",{class:"badge",children:"3"})]}),Object(V.jsxs)("div",{class:"shopping-cart-total",children:[Object(V.jsx)("span",{class:"lighter-text",children:"Total:"}),Object(V.jsx)("span",{class:"main-color-text",children:"$2,229.97"})]})]}),Object(V.jsxs)("ul",{class:"shopping-cart-items",children:[Object(V.jsxs)("li",{class:"clearfix",children:[Object(V.jsx)("img",{src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/cart-item2.jpg",alt:"item1"}),Object(V.jsx)("span",{class:"item-name",children:"KS Automatic Mechanic..."}),Object(V.jsx)("span",{class:"item-price",children:"$1,249.99"}),Object(V.jsx)("span",{class:"item-quantity",children:"Quantity: 01"})]}),Object(V.jsxs)("li",{class:"clearfix",children:[Object(V.jsx)("img",{src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/195612/cart-item3.jpg",alt:"item1"}),Object(V.jsx)("span",{class:"item-name",children:'Kindle, 6" Glare-Free To...'}),Object(V.jsx)("span",{class:"item-price",children:"$129.99"}),Object(V.jsx)("span",{class:"item-quantity",children:"Quantity: 01"})]})]}),Object(V.jsx)("a",{href:"#",class:"button",children:"Checkout"})]})})}var Mt=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){var e;Object(U.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={open:!1,isMobile:!1},e.onLogin=function(t){e.props.onLogin(t)},e.onSignup=function(t){e.props.onSignup(t)},e.onLogout=function(){e.props.onLogout()},e.toggleOpen=function(){var t=e.state,n=t.open;t.isMobile&&e.setState({open:!n})},e.handleResize=function(){e.setState({isMobile:window.innerWidth<768})},e.toggleCart=function(){e.props.setIsShoppingCart(!e.props.isShoppingCart)},e}return Object(W.a)(n,[{key:"componentDidMount",value:function(){window.innerWidth<768&&this.setState(Object(h.a)(Object(h.a)({},this.state),{},{isMobile:!0})),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=this.props.user;return Object(V.jsxs)(V.Fragment,{children:[Object(V.jsxs)("div",{className:"navbar",children:[Object(V.jsxs)("div",{className:"logo",children:[Object(V.jsx)(o.b,{to:"/",children:Object(V.jsx)("img",{src:z,alt:"logo"})}),e&&Object(V.jsxs)("a",{className:"cart-symbol",id:"cart",onClick:this.toggleCart,style:{width:this.state.isMobile?"240px":"320px"},children:[Object(V.jsx)("i",{class:"fa fa-shopping-cart"})," Cart",Object(V.jsx)("span",{class:"badge",children:"3"}),Object(V.jsx)(Et,{isMobile:this.state.isMobile})]})]}),Object(V.jsx)(Tt,{user:e,onLogout:this.onLogout,open:this.state.open,toggleOpen:this.toggleOpen})]}),Object(V.jsx)(kt,{})]})}}]),n}(r.a.Component);var Rt={onLogin:ot,onSignup:it,onLogout:function(){return function(e){N.logout().then((function(){return e({type:"SET_USER",user:null})})).catch((function(e){ve("Cannot logout"),console.log("Cannot logout",e)}))}},setIsShoppingCart:function(e){return function(t){try{t({type:"SET_CART",isShoppingCart:e})}catch(n){}}}},At=Object(i.b)((function(e){return{user:e.userModule.user,isShoppingCart:e.systemModule.isShoppingCart}}),Rt)(Mt),_t=function(e){Object(P.a)(n,e);var t=Object(F.a)(n);function n(){return Object(U.a)(this,n),t.apply(this,arguments)}return Object(W.a)(n,[{key:"render",value:function(){return Object(V.jsxs)("div",{children:[Object(V.jsx)(At,{}),Object(V.jsx)("main",{className:"main-container",children:Object(V.jsx)(q.c,{children:Ct.map((function(e){return Object(V.jsx)(q.a,{exact:!0,component:e.component,path:e.path},e.path)}))})})]})}}]),n}(r.a.Component);n(440);c.a.render(Object(V.jsx)(r.a.StrictMode,{children:Object(V.jsx)(i.a,{store:B,children:Object(V.jsx)(o.a,{children:Object(V.jsx)(_t,{})})})}),document.getElementById("root"))}},[[441,1,2]]]);
//# sourceMappingURL=main.c198cba4.chunk.js.map